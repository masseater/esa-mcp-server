# ESA MCP Server

esa.io API と連携するための Model Context Protocol (MCP) サーバーです。
Deno を使用して構築されています。

## 機能

現在、以下の基本的な esa.io API 操作を MCP ツールとして提供しています：

*   ユーザー情報の取得
*   記事一覧の取得
*   記事詳細の取得
*   記事の作成
*   記事の更新
*   記事の削除

## 前提条件

*   [Deno](https://deno.land/) (v1.x.x 以降) がインストールされていること。
*   esa.io の API トークンを持っていること。

## セットアップ

1.  リポジトリをクローンします。
    ```bash
    git clone <repository-url>
    cd esa-mcp-server
    ```

2.  プロジェクトルートに `.env` ファイルを作成し、以下の環境変数を設定します。
    ```dotenv
    # .env
    ESA_TEAM_NAME="YOUR_ESA_TEAM_NAME" # 例: "myteam"
    ESA_TOKEN="YOUR_ESA_API_TOKEN"     # 例: "abcdef12345..."
    ```
    `YOUR_ESA_TEAM_NAME` と `YOUR_ESA_API_TOKEN` を実際の値に置き換えてください。

## 使い方 (Usage)

### 前提条件 (Prerequisites)

*   [Deno](https://deno.land/) がインストールされていること。(Install Deno)
*   **Deno v2.0 以降が必要です。(Deno v2.0 or later is required.)**
*   esa.io の API トークンとチーム名が必要です。(Requires esa.io API token and team name)

### セットアップ (Setup)

1.  リポジトリをクローンします。(Clone the repository)
2.  プロジェクトルートに `.env` ファイルを作成し、以下の内容を記述します。(Create a `.env` file in the project root and add the following content)

    ```dotenv
    ESA_TOKEN=YOUR_ESA_API_TOKEN
    ESA_TEAM_NAME=YOUR_ESA_TEAM_NAME
    ```

    `YOUR_ESA_API_TOKEN` と `YOUR_ESA_TEAM_NAME` を実際の値に置き換えてください。(Replace `YOUR_ESA_API_TOKEN` and `YOUR_ESA_TEAM_NAME` with your actual values.)

3.  (任意) Cursor で MCP サーバーとして設定します。 (Optional: Configure as an MCP server in Cursor)
    `.cursor/mcp.json` に以下の設定を追加します。(Add the following configuration to `.cursor/mcp.json`)

    ```json
    {
      "mcpServers": {
        "esa-mcp-server": {
          "command": "deno",
          "args": [
            "run",
            "--allow-env",
            "--allow-net",
            "--allow-read",
            "ABSOLUTE_PATH_TO/esa-mcp-server/main.ts" // Replace with the actual absolute path
          ],
          "env": {
            "ESA_TOKEN": "${env:ESA_TOKEN}", // Reads from .env
            "ESA_TEAM_NAME": "${env:ESA_TEAM_NAME}" // Reads from .env
          }
        }
      }
    }
    ```

    **注意:**
    *   `ABSOLUTE_PATH_TO/esa-mcp-server/main.ts` は、あなたの環境における `main.ts` への **絶対パス** に書き換えてください。(Replace `ABSOLUTE_PATH_TO/esa-mcp-server/main.ts` with the **absolute path** to `main.ts` in your environment.)
    *   `.cursor/mcp.json` で `env` を `${env:VAR_NAME}` の形式で指定すると、`.env` ファイルから値を読み込むことができます。(Using `${env:VAR_NAME}` in `.cursor/mcp.json` allows reading values from the `.env` file.)
    *   **セキュリティ上の注意**: `.cursor/mcp.json` に直接 API トークンを書き込まないでください。`.env` ファイルを使用することを強く推奨します。(**Security Note**: Do not hardcode your API token directly in `.cursor/mcp.json`. Using the `.env` file is strongly recommended.)

### 実行 (Running)

Cursor で MCP サーバーとして設定した場合、Cursor が自動的にサーバーを起動します。

手動で実行する場合 (デバッグなど): (Manual execution for debugging etc.)

```bash
deno run --allow-env --allow-net --allow-read main.ts
```

### 利用可能なツール (Available Tools)

現在、以下のツールが利用可能です。(Currently, the following tools are available:)

*   `esa_mcp_server.user.get_info`: 現在の esa.io ユーザー情報を取得します。(Get current esa.io user information.)
*   `esa_mcp_server.posts.get_list`: 投稿一覧を取得します。(Get a list of posts.)
*   `esa_mcp_server.posts.get_detail`: 特定の投稿の詳細を取得します。(Get details of a specific post.)
*   `esa_mcp_server.posts.create`: 新しい投稿を作成します。(Create a new post.)
*   `esa_mcp_server.posts.update`: 既存の投稿を更新します。(Update an existing post.)
*   `esa_mcp_server.posts.delete`: 投稿を削除します。(Delete a post.)

## 開発

### チェックとテスト

以下のコマンドで、フォーマット、リント、型チェック、ユニットテストをまとめて実行できます。コミット前にはこのコマンドが自動的に実行されます（pre-commit フック）。

```bash
deno task check:all
```

### インテグレーションテスト

インテグレーションテスト（実際の esa.io API と通信するテスト）は別途実行します。

```bash
deno task test:integration
```

**注意:** インテグレーションテストを実行するには、有効な `ESA_TEAM_NAME` と `ESA_TOKEN` が `.env` ファイルに設定されている必要があります。

---

*この README は基本的な情報のみ記載しています。詳細はコードやコミットログを参照してください。* 

## NOTE

generated by Cursor (gemini-2.5-pro-exp-03-25)